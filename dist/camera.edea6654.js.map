{"version":3,"sources":["js/modules/camera.js"],"names":["$app","document","getElementById","$camera","$canvas","$btnTakePhoto","$btnFlip","$btnDelete","$btnDownload","$photoPreview","isPhotoAvailable","showSecondaryButtons","classList","add","hideSecondaryButtons","remove","takePhoto","width","height","mode","Audio","play","ctx","getContext","translate","scale","drawImage","imgData","toDataURL","src","deletePhoto","downloadPhoto","link","createElement","download","Date","getTime","href","getAttribute","click","showBigPhoto","$modalContainer","className","$bigImg","Image","alt","appendChild","addEventListener","target","setTimeout","changeCamera","constraints","stream","navigator","mediaDevices","getUserMedia","video","facingMode","ideal","srcObject","onloadedmetadata","error","console","log","err"],"mappings":"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","file":"camera.edea6654.js","sourceRoot":"..\\src","sourcesContent":["const $app = document.getElementById('app'),\n\t$camera = document.getElementById('camera'),\n\t$canvas = document.getElementById('photo-taker'),\n\t$btnTakePhoto = document.getElementById('btn-take-photo'),\n\t$btnFlip = document.getElementById('btn-flip'),\n\t$btnDelete = document.getElementById('btn-delete'),\n\t$btnDownload = document.getElementById('btn-download'),\n\t$photoPreview = document.getElementById('photo-preview');\n\nlet isPhotoAvailable = false;\n\nconst showSecondaryButtons = () => {\n\tif (!isPhotoAvailable) return;\n\t$btnDelete.classList.add('show');\n\t$btnDownload.classList.add('show');\n};\n\nconst hideSecondaryButtons = () => {\n\tif (isPhotoAvailable) return;\n\t$btnDelete.classList.remove('show');\n\t$btnDownload.classList.remove('show');\n};\n\nconst takePhoto = (width, height, mode) => {\n\tconst sound = new Audio('audio/sound.mp3');\n\tsound.play();\n\tconst ctx = $canvas.getContext('2d');\n\tif (mode === 'user') {\n\t\t// Flip the canvas, so the image generated is right\n\t\tctx.translate(width, 0);\n\t\tctx.scale(-1, 1);\n\t}\n\tctx.drawImage($camera, 0, 0, width, height);\n\tconst imgData = $canvas.toDataURL('image/jpeg');\n\t$photoPreview.src = imgData;\n\t$photoPreview.classList.remove('photo__preview--unavailable');\n\tisPhotoAvailable = true;\n\tshowSecondaryButtons();\n};\n\nconst deletePhoto = () => {\n\tif (!isPhotoAvailable) return;\n\t$photoPreview.classList.remove('show');\n\tisPhotoAvailable = false;\n\thideSecondaryButtons();\n\t$photoPreview.classList.add('photo__preview--unavailable');\n};\n\nconst downloadPhoto = () => {\n\tif (!isPhotoAvailable) return;\n\tconst link = document.createElement('a');\n\tlink.download = 'img-' + new Date().getTime();\n\tlink.href = $photoPreview.getAttribute('src');\n\tlink.click();\n};\n\nconst showBigPhoto = (width, height) => {\n\tconst $modalContainer = document.createElement('div');\n\t$modalContainer.className = 'modal__overlay';\n\tconst $bigImg = new Image(width, height);\n\t$bigImg.alt = 'Image view';\n\t$bigImg.src = $photoPreview.getAttribute('src');\n\t$bigImg.className = 'modal__img';\n\t$modalContainer.appendChild($bigImg);\n\t$app.appendChild($modalContainer);\n\t$modalContainer.addEventListener('click', ({ target }) => {\n\t\tif (target === $modalContainer) {\n\t\t\t$modalContainer.classList.add('out');\n\t\t\tsetTimeout(() => $modalContainer.remove(), 405);\n\t\t}\n\t});\n};\n\nconst changeCamera = async (mode, constraints) => {\n\ttry {\n\t\tconst stream = await navigator.mediaDevices.getUserMedia({\n\t\t\tvideo: { ...constraints, facingMode: { ideal: mode } },\n\t\t});\n\t\t$camera.srcObject = stream;\n\t\t$camera.onloadedmetadata = () => {\n\t\t\tif (mode === 'user') {\n\t\t\t\t$camera.classList.add('flip');\n\t\t\t} else {\n\t\t\t\t$camera.classList.remove('flip');\n\t\t\t}\n\t\t\t$camera.play();\n\t\t};\n\t} catch (error) {\n\t\tconsole.log(err);\n\t}\n};\n\nexport {\n\t$camera,\n\t$canvas,\n\t$btnTakePhoto,\n\t$btnFlip,\n\t$btnDelete,\n\t$btnDownload,\n\t$photoPreview,\n\tshowBigPhoto,\n\ttakePhoto,\n\tdownloadPhoto,\n\tdeletePhoto,\n\tchangeCamera,\n};\n"]}