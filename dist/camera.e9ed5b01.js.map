{"version":3,"sources":["js/modules/camera.js"],"names":["$app","document","getElementById","$camera","$canvas","$btnTakePhoto","$btnDelete","$btnDownload","$photoPreview","isPhotoAvailable","isCanvasFlipped","showSecondaryButtons","classList","add","hideSecondaryButtons","remove","takePhoto","width","height","Audio","play","ctx","getContext","translate","scale","drawImage","imgData","toDataURL","src","deletePhoto","downloadPhoto","link","createElement","download","Date","getTime","href","getAttribute","click","showBigPhoto","$modalContainer","className","$bigImg","Image","alt","appendChild","addEventListener","target","setTimeout"],"mappings":";AA0DA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,YAAA,QAAA,cAAA,QAAA,UAAA,QAAA,aAAA,QAAA,cAAA,QAAA,aAAA,QAAA,WAAA,QAAA,cAAA,QAAA,QAAA,QAAA,aAAA,EA1DA,MAAMA,EAAOC,SAASC,eAAe,OACpCC,EAAUF,SAASC,eAAe,UAClCE,EAAUH,SAASC,eAAe,eAClCG,EAAgBJ,SAASC,eAAe,kBACxCI,EAAaL,SAASC,eAAe,cACrCK,EAAeN,SAASC,eAAe,gBACvCM,EAAgBP,SAASC,eAAe,iBAoDzC,QAAA,cAAA,EAAA,QAAA,aAAA,EAAA,QAAA,WAAA,EAAA,QAAA,cAAA,EAAA,QAAA,QAAA,EAAA,QAAA,QAAA,EAlDA,IAAIO,GAAmB,EAEnBC,GAAkB,EAEtB,MAAMC,EAAuB,KACvBF,IACLH,EAAWM,UAAUC,IAAI,QACzBN,EAAaK,UAAUC,IAAI,UAGtBC,EAAuB,KACxBL,IACJH,EAAWM,UAAUG,OAAO,QAC5BR,EAAaK,UAAUG,OAAO,UAGzBC,EAAY,CAACC,EAAOC,KACX,IAAIC,MAAM,mBAClBC,OACAC,MAAAA,EAAMjB,EAAQkB,WAAW,MAC1BZ,IAEJW,EAAIE,UAAUN,EAAO,GACrBI,EAAIG,OAAO,EAAG,GACdd,GAAkB,GAEnBW,EAAII,UAAUtB,EAAS,EAAG,EAAGc,EAAOC,GAC9BQ,MAAAA,EAAUtB,EAAQuB,UAAU,cAClCnB,EAAcoB,IAAMF,EACpBlB,EAAcI,UAAUG,OAAO,gCAC/BN,GAAmB,KAxBnBH,EAAWM,UAAUC,IAAI,QACzBN,EAAaK,UAAUC,IAAI,UA2C5B,QAAA,UAAA,EAhBA,MAAMgB,EAAc,KACdpB,IACLD,EAAcI,UAAUG,OAAO,SAC/BN,GAAmB,KAzBnBH,EAAWM,UAAUG,OAAO,QAC5BR,EAAaK,UAAUG,OAAO,SA0B9BP,EAAcI,UAAUC,IAAI,iCAW7B,QAAA,YAAA,EARA,MAAMiB,EAAgB,KACjB,IAACrB,EAAkB,OACjBsB,MAAAA,EAAO9B,SAAS+B,cAAc,KACpCD,EAAKE,SAAW,QAAS,IAAIC,MAAOC,UACpCJ,EAAKK,KAAO5B,EAAc6B,aAAa,OACvCN,EAAKO,SAGN,QAAA,cAAA,EAAA,MAAMC,EAAe,CAACtB,EAAOC,KACtBsB,MAAAA,EAAkBvC,SAAS+B,cAAc,OAC/CQ,EAAgBC,UAAY,iBACtBC,MAAAA,EAAU,IAAIC,MAAM1B,EAAOC,GACjCwB,EAAQE,IAAM,aACdF,EAAQd,IAAMpB,EAAc6B,aAAa,OACzCK,EAAQD,UAAY,aACpBD,EAAgBK,YAAYH,GAC5B1C,EAAK6C,YAAYL,GACjBA,EAAgBM,iBAAiB,QAAyB,IAAf,IAAA,OAAEC,GAAa,EACrDA,IAAWP,IACdA,EAAgB5B,UAAUC,IAAI,OAC9BmC,WAAW,IAAMR,EAAgBzB,SAAU,SAZ9C,QAAA,aAAA","file":"camera.e9ed5b01.js","sourceRoot":"..\\src","sourcesContent":["const $app = document.getElementById('app'),\n\t$camera = document.getElementById('camera'),\n\t$canvas = document.getElementById('photo-taker'),\n\t$btnTakePhoto = document.getElementById('btn-take-photo'),\n\t$btnDelete = document.getElementById('btn-delete'),\n\t$btnDownload = document.getElementById('btn-download'),\n\t$photoPreview = document.getElementById('photo-preview');\n\nlet isPhotoAvailable = false;\n\nlet isCanvasFlipped = false;\n\nconst showSecondaryButtons = () => {\n\tif (!isPhotoAvailable) return;\n\t$btnDelete.classList.add('show');\n\t$btnDownload.classList.add('show');\n};\n\nconst hideSecondaryButtons = () => {\n\tif (isPhotoAvailable) return;\n\t$btnDelete.classList.remove('show');\n\t$btnDownload.classList.remove('show');\n};\n\nconst takePhoto = (width, height) => {\n\tconst sound = new Audio('audio/sound.mp3');\n\tsound.play();\n\tconst ctx = $canvas.getContext('2d');\n\tif (!isCanvasFlipped) {\n\t\t// Flip the canvas, so the image generated is right\n\t\tctx.translate(width, 0);\n\t\tctx.scale(-1, 1);\n\t\tisCanvasFlipped = true;\n\t}\n\tctx.drawImage($camera, 0, 0, width, height);\n\tconst imgData = $canvas.toDataURL('image/jpeg');\n\t$photoPreview.src = imgData;\n\t$photoPreview.classList.remove('photo__preview--unavailable');\n\tisPhotoAvailable = true;\n\tshowSecondaryButtons();\n};\n\nconst deletePhoto = () => {\n\tif (!isPhotoAvailable) return;\n\t$photoPreview.classList.remove('show');\n\tisPhotoAvailable = false;\n\thideSecondaryButtons();\n\t$photoPreview.classList.add('photo__preview--unavailable');\n};\n\nconst downloadPhoto = () => {\n\tif (!isPhotoAvailable) return;\n\tconst link = document.createElement('a');\n\tlink.download = 'img-' + new Date().getTime();\n\tlink.href = $photoPreview.getAttribute('src');\n\tlink.click();\n};\n\nconst showBigPhoto = (width, height) => {\n\tconst $modalContainer = document.createElement('div');\n\t$modalContainer.className = 'modal__overlay';\n\tconst $bigImg = new Image(width, height);\n\t$bigImg.alt = 'Image view';\n\t$bigImg.src = $photoPreview.getAttribute('src');\n\t$bigImg.className = 'modal__img';\n\t$modalContainer.appendChild($bigImg);\n\t$app.appendChild($modalContainer);\n\t$modalContainer.addEventListener('click', ({ target }) => {\n\t\tif (target === $modalContainer) {\n\t\t\t$modalContainer.classList.add('out');\n\t\t\tsetTimeout(() => $modalContainer.remove(), 405);\n\t\t}\n\t});\n};\n\nexport {\n\t$camera,\n\t$canvas,\n\t$btnTakePhoto,\n\t$btnDelete,\n\t$btnDownload,\n\t$photoPreview,\n\tshowBigPhoto,\n\ttakePhoto,\n\tdownloadPhoto,\n\tdeletePhoto,\n};\n"]}